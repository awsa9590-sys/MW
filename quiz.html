<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุดุงูู ูู ุงูุงุญุชูุงูุงุช ูุฌุฏุงูู ุงูุญูุงุฉ (16 ุณุคุงูุงู)</title>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #eef2f7; 
            color: #333;
            margin: 0;
            padding: 20px;
            direction: rtl;
            text-align: right;
        }
        .container {
            max-width: 900px; 
            margin: 0 auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); 
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            border-bottom: 3px solid #0056b3;
            margin-bottom: 30px;
        }
        h1 {
            color: #0056b3;
            text-align: right;
            margin: 0;
            font-size: 2em;
        }
        #admin-icon {
            cursor: pointer;
            font-size: 1.1em;
            color: #d9534f;
            text-decoration: none;
            padding: 10px 15px;
            border: 2px solid #d9534f;
            border-radius: 6px;
            transition: background-color 0.3s, color 0.3s;
            font-weight: bold;
        }
        #admin-icon:hover {
            background-color: #d9534f;
            color: white;
        }
        .name-input-container {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #007bff;
            border-radius: 8px;
            background-color: #f0f7ff;
        }
        .name-input-container label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            color: #007bff;
            font-size: 1.1em;
        }
        .name-input-container input[type="text"] {
            width: 98%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
        }
        .question-block {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .question {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #2c3e50;
        }
        .answers label {
            display: block;
            margin: 8px 0;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .answers label:hover {
            background-color: #e0e0e0;
        }
        #submit-quiz {
            display: block;
            width: 100%;
            padding: 18px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.3em;
            cursor: pointer;
            margin-top: 40px;
            transition: background-color 0.3s;
        }
        #submit-quiz:hover {
            background-color: #1e7e34;
        }
        #results {
            margin-top: 30px;
            padding: 25px;
            border: 2px solid #0056b3;
            border-radius: 10px;
            background-color: #f0f7ff;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            display: none;
        }
        .correct-answer { background-color: #d4edda !important; color: #155724 !important; font-weight: bold !important; border: 1px solid #c3e6cb; }
        .incorrect-answer { background-color: #f8d7da !important; color: #721c24 !important; border: 1px solid #f5c6cb; }
        
        /* ููุญุฉ ุงููุดุฑู */
        #admin-panel-output {
            margin-top: 25px;
            padding: 20px;
            border: 2px solid #d9534f;
            border-radius: 8px;
            background-color: #fff8f8;
            color: #333;
            display: none;
            text-align: center;
        }
        /* ุชูุณูู ุงูุฌุฏูู ุงูุฌุฏูุฏ */
        .life-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            text-align: center;
        }
        .life-table th, .life-table td {
            border: 1px solid #ddd;
            padding: 10px;
        }
        .life-table th {
            background-color: #e9ecef;
            color: #495057;
        }
        /* ุชูุณูู ุงูุตูุฑุฉ ูุฅุฌุงุจุฉ */
        .formula-img {
            max-width: 100%; /* ุถูุงู ุนุฏู ุชุฌุงูุฒ ุงูุตูุฑุฉ ููุนุฑุถ ุงููุชุงุญ */
            height: auto;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    
    <section class="container">
        
        <header>
            <h1>ุงุฎุชุจุงุฑ ุดุงูู ูู ุงูุงุญุชูุงูุงุช ูุฌุฏุงูู ุงูุญูุงุฉ (16 ุณุคุงูุงู)</h1>
            <a id="admin-icon" onclick="showAdminPanel()" title="ููุญุฉ ุชุญูู ุงููุชุงุฆุฌ">๐ ููุญุฉ ุงููุดุฑู</a>
        </header>

        <div class="name-input-container">
            <label for="student-name">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงุณู ุงูุทุงูุจ:</label>
            <input type="text" id="student-name" placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู ููุง">
            <div id="name-error" class="error-message" style="display: none; color: red; margin-top: 5px;">ุงูุงุณู ูุทููุจ ูููุชุงุจุนุฉ.</div>
        </div>

        <div id="quiz-container">
            <h2 style="margin-top: 40px; border-bottom: 1px dashed #ccc; padding-bottom: 10px;">ุจูุงูุงุช ุฌุฏูู ุงูุญูุงุฉ ููุฃุณุฆูุฉ 3-16</h2>
            <table class="life-table">
                <thead>
                    <tr>
                        <th>X</th>
                        <th>lx</th>
                        <th>dx</th>
                        <th>qx</th>
                        <th>px</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>98</td>
                        <td>160</td>
                        <td>64</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>99</td>
                        <td></td>
                        <td>40</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>100</td>
                        <td></td>
                        <td></td>
                        <td>0.667</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>101</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>0.316</td>
                    </tr>
                    <tr>
                        <td>102</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
            <div id="questions">
                <p>ุฌุงุฑู ุชุญููู ุงูุฃุณุฆูุฉ...</p>
            </div>
        
            <button id="submit-quiz">ุฅููุงุก ุงูุงุฎุชุจุงุฑ ูุญุณุงุจ ุงููุชูุฌุฉ</button>
        
            <div id="results"></div>

            <div id="admin-panel-output"></div>
        </div>
    </section>

    <script>
        // **********************************************
        // ๐จ ูุฌุจ ุชุบููุฑ ูุฐู ุงูููู ุฅูู ูููู ุงูุญููููุฉ ูุงูุงุญุชูุงุธ ุจูุง ุณุฑุงู!
        const ADMIN_PASSWORD = "123"; // ๐ ูููุฉ ูุฑูุฑ ุงููุดุฑู
        
        // ๐ด ุงูุฑูุงุจุท ููุนุฑูุงุช ุงูุญููู ุงูุฎุงุตุฉ ุจุฌูุฌู ููุฑูุฒ - ูุฌุจ ุชุบููุฑูุง!
        // ุงุณุชุจุฏู ููู "YOUR_FORM_ID", "entry.XXX" ุจุงูููู ุงูุชู ุชุญุตู ุนูููุง ูู Google Forms.
        const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/YOUR_FORM_ID/formResponse"; 
        const ENTRY_NAME_ID = "entry.123456789"; // ูุนุฑู ุญูู ุงูุงุณู
        const ENTRY_SCORE_ID = "entry.987654321"; // ูุนุฑู ุญูู ุงูุฏุฑุฌุฉ (ุงูุตุญูุญ/ุงูููู)
        const ENTRY_PERCENT_ID = "entry.112233445"; // ูุนุฑู ุญูู ุงููุณุจุฉ ุงููุฆููุฉ
        const GOOGLE_SHEET_LINK = "https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit"; // ุฑุงุจุท ููู ุงููุชุงุฆุฌ (Sheet)
        // **********************************************

        // 1. ุชุนุฑูู ุงูุฃุณุฆูุฉ (ุงูู 16 ุณุคุงูุงู ุงูุฌุฏูุฏุฉ)
        const myQuestions = [ // ๐จ ุชู ุงูุชุตุญูุญ ููููู ูุตูููุฉ
            // Q1: ุณุคุงู ูุธุฑู 1 
            { question: "ูก- ุงุญุชูุงู ุฃู ุดุฎุตูุง ุณูู (X) ุณูู ูุนูุด ุญุชู ูุตููู ุงูุณู (X+t) ูู:", 
              answers: { a: "qx", b: "$${}_t P_x$$", c: "$${}_t P_x$$", d: "$${}_t q_x$$" }, 
              correctAnswer: "c" }, 
            // Q2: ุณุคุงู ูุธุฑู 2 
            { question: "ูข- ุงุญุชูุงู ุฃู ุดุฎุตูุง ุณูู (X) ุณูู ูููุช ุฎูุงู ุงูุณูุฉ ุงูุชู ุชูู ูุตููู ุงูุณู (X+n) ูู:", 
              answers: { 
                  // ๐จ ุชู ูุถุน ูุณู ุงูุตูุฑุฉ ุฏุงุฎู ุนูุงูุงุช ุชูุตูุต ููููู ุณูุณูุฉ ูุตูุฉ ุตุงูุญุฉ (ุงูุฅุฌุงุจุฉ ุฃ)
                  a: '<img class="1765663752699.img" src="1765663752699.png>', 
                  // ๐จ ุชู ุฅุถุงูุฉ ุงูุฎูุงุฑ ุงูููููุฏ (b) ููุต ุงูุชุฑุงุถู
                  b:  '<img class="1765663798149.img" src="1765663798149.png>', 
                  c: "ูู ูุง ุณุจู", 
                  d: "ูุง ุดูุก ููุง ุณุจู" 
              }, 
              correctAnswer: "b" }, 
            // Q3: q_{98}
            { question: "ูฃ- q{98} ุชุณุงูู:", 
              answers: { a: "0.6", b: "0.4", c: "0.333", d: "0.667" }, 
              correctAnswer: "b" }, 
            // Q4: P_{98}
            { question: "ูค- P{98} ุชุณุงูู:", 
              answers: { a: "0.60", b: "0.4", c: "0.333", d: "0.667" }, 
              correctAnswer: "a" }, 
            // Q5: l_{99}
            { question: "ูฅ- l{99} ุชุณุงูู:", 
              answers: { a: "96", b: "40", c: "56", d: "37" }, 
              correctAnswer: "a" }, 
            // Q6: q_{99}
            { question: "ูฆ- q{99} ุชุณุงูู:", 
              answers: { a: "0.583", b: "0.310", c: "0.414", d: "0.890" }, 
              correctAnswer: "c" }, 
            // Q7: P_{99}
            { question: "ูง- P{99} ุชุณุงูู:", 
              answers: { a: "0.583", b: "0.310", c: "0.414", d: "0.890" }, 
              correctAnswer: "a" }, 
            // Q8: l_{100}
            { question: "ูจ- l{100} ุชุณุงูู:", 
              answers: { a: "96", b: "40", c: "56", d: "37" }, 
              correctAnswer: "c" }, 
            // Q9: d_{100}
            { question: "ูฉ- d{100} ุชุณุงูู:", 
              answers: { a: "96", b: "40", c: "56", d: "37" }, 
              correctAnswer: "d" }, 
            // Q10: P_{100}
            { question: "ูกู- P{100} ุชุณุงูู:", 
              answers: { a: "0.333", b: "0.310", c: "0.410", d: "0.890" }, 
              correctAnswer: "a" }, 
            // Q11: l_{101}
            { question: "ูกูก- l{101} ุชุณุงูู:", 
              answers: { a: "96", b: "40", c: "19", d: "37" }, 
              correctAnswer: "c" }, 
            // Q12: d_{101}
            { question: "ูกูข- d{101} ุชุณุงูู:", 
              answers: { a: "13", b: "20", c: "14", d: "12" }, 
              correctAnswer: "a" }, 
            // Q13: q_{101}
            { question: "ูกูฃ- q{101} ุชุณุงูู:", 
              answers: { a: "0.333", b: "0.310", c: "0.685", d: "0.890" }, 
              correctAnswer: "c" }, 
            // Q14: l_{102}
            { question: "ูกูค- l{102} ุชุณุงูู:", 
              answers: { a: "13", b: "6", c: "4", d: "8" }, 
              correctAnswer: "b" }, 
            // Q15: d_{102}
            { question: "ูกูฅ- d{102} ุชุณุงูู:", 
              answers: { a: "13", b: "6", c: "4", d: "8" }, 
              correctAnswer: "b" }, 
            // Q16: P_{102}
            { question: "ูกูฆ- P{102} ุชุณุงูู:", 
              answers: { a: "0.000", b: "0.111", c: "0.685", d: "0.890" }, 
              correctAnswer: "a" } 
        ]; // ๐จ ููุงูุฉ ุงููุตูููุฉ
        
        // 2. ุงูุญุตูู ุนูู ุงูุนูุงุตุฑ ูู HTML
        const quizContainer = document.getElementById('questions');
        const resultsContainer = document.getElementById('results');
        const submitButton = document.getElementById('submit-quiz');
        const studentNameInput = document.getElementById('student-name');
        const nameError = document.getElementById('name-error');
        const adminPanelOutput = document.getElementById('admin-panel-output');


        // 3. ุฏุงูุฉ ุจูุงุก ูุนุฑุถ ุงูุงุฎุชุจุงุฑ
        function buildQuiz(){
            const output = [];
            myQuestions.forEach( (currentQuestion, questionNumber) => {
                const answers = [];
                const options = ['ุฃ', 'ุจ', 'ุฌ', 'ุฏ']; // 4 ุฎูุงุฑุงุช
                let optionIndex = 0;
                
                for(let letter in currentQuestion.answers){
                    answers.push(
                        `<div class="answers">
                            <label>
                                <input type="radio" name="question${questionNumber}" value="${letter}">
                                <span style="font-weight: normal;">${options[optionIndex++]}: ${currentQuestion.answers[letter]}</span>
                            </label>
                        </div>`
                    );
                }
                output.push(
                    `<div class="question-block">
                        <div class="question">${currentQuestion.question}</div>
                        ${answers.join('')}
                    </div>`
                );
            });
            quizContainer.innerHTML = output.join('');
        }


        // 4. ุฏุงูุฉ ุนุฑุถ ุงููุชุงุฆุฌ ูุญุณุงุจ ุงูุฏุฑุฌุงุช ูุฅุฑุณุงููุง ุฅูู Google Forms (ูู ุชุชุบูุฑ)
        function showResults(){
            // ุงูุชุญูู ูู ุงูุงุณู ุฃููุงู
            const studentName = studentNameInput.value.trim();
            if (studentName === "") {
                nameError.style.display = 'block';
                studentNameInput.focus();
                resultsContainer.style.display = 'none';
                return; 
            }
            nameError.style.display = 'none';

            const questionBlocks = quizContainer.querySelectorAll('.question-block');
            let numCorrect = 0;
            const totalQuestions = myQuestions.length; // 16 ุณุคุงูุงู
            
            resultsContainer.style.display = 'block';

            // ุญุณุงุจ ุงูุฏุฑุฌุฉ ูุงูุชูููู
            myQuestions.forEach( (currentQuestion, questionNumber) => {
                const questionBlock = questionBlocks[questionNumber];
                const selector = `input[name=question${questionNumber}]:checked`;
                const inputElement = questionBlock.querySelector(selector);
                const userAnswer = (inputElement || {}).value;

                // ุฅุฒุงูุฉ ุงูุชูููู ุงูุณุงุจู
                Array.from(questionBlock.querySelectorAll('label')).forEach(label => {
                    label.classList.remove('correct-answer', 'incorrect-answer');
                });
                
                // ุชูููู ุงูุฅุฌุงุจุงุช
                const correctLabel = questionBlock.querySelector(`input[value="${currentQuestion.correctAnswer}"]`).parentNode;
                
                if(userAnswer === currentQuestion.correctAnswer){
                    numCorrect++;
                    correctLabel.classList.add('correct-answer');
                } else {
                    if(inputElement) {
                        inputElement.parentNode.classList.add('incorrect-answer');
                    }
                    correctLabel.classList.add('correct-answer'); 
                }
            });
            
            const percentage = ((numCorrect / totalQuestions) * 100).toFixed(2);
            
            // **********************************
            // โญ๏ธ ุฅุฑุณุงู ุงููุชูุฌุฉ ุฅูู Google Form
            const formData = new FormData();
            formData.append(ENTRY_NAME_ID, studentName);
            formData.append(ENTRY_SCORE_ID, `${numCorrect} / ${totalQuestions}`);
            formData.append(ENTRY_PERCENT_ID, percentage);

            fetch(GOOGLE_FORM_URL, {
                method: 'POST',
                mode: 'no-cors', 
                body: formData
            }).then(() => {
                console.log("ุชู ุฅุฑุณุงู ุงููุชูุฌุฉ ุฅูู Google Sheets ุจูุฌุงุญ.");
            }).catch(error => {
                console.error("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงููุชูุฌุฉ:", error);
            });
            // **********************************

            // ุนุฑุถ ุงูุฅุฌูุงูู ููุทุงูุจ (ุจุฏูู ุฒุฑ ุงูุฅูููู)
            resultsContainer.innerHTML = `
                <h2>ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ ููุทุงูุจ/ุฉ: ${studentName}</h2>
                <p style="color: green;">โ ุชู ุชุณุฌูู ูุชูุฌุชู ุจูุฌุงุญ ูู ุณุฌู ุงููุชุงุฆุฌ ุงููุฑูุฒู.</p>
                <p>ุนุฏุฏ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: **${numCorrect}** ูู ุฃุตู ${totalQuestions}</p>
                <p>ูุณุจุฉ ุงููุฌุงุญ: **${percentage}%**</p>
            `;
            
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }


        // 5. ุฏุงูุฉ ููุญุฉ ุชุญูู ุงููุดุฑู ุงูุฌุฏูุฏุฉ (ูุนุฑุถ ุฑุงุจุท ุณุฌู ุงููุชุงุฆุฌ)
        function showAdminPanel() {
            const userPassword = prompt("ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ูุฑูุฑ ุงููุดุฑู ูุนุฑุถ ููุญุฉ ุงูุชุญูู:");

            if (userPassword === ADMIN_PASSWORD) {
                adminPanelOutput.style.display = 'block';
                adminPanelOutput.innerHTML = `
                    <h3>๐ ููุญุฉ ุชุญูู ุงููุดุฑู (ูููุฉ ุงููุฑูุฑ ุตุญูุญุฉ)</h3>
                    <p style="color: #0056b3; font-weight: bold;">โ ุฌููุน ุงููุชุงุฆุฌ ูุชู ุชุณุฌูููุง ุญุงููุงู ูู ููู ูุชุงุฆุฌ ูุฑูุฒู ุนุจุฑ ุงูุฅูุชุฑูุช.</p>
                    <p>ููุงุทูุงุน ุนูู ุณุฌู ูุชุงุฆุฌ ุงูุทูุงุจ ุงููุญุฏุซ ููุฑุงูุ ูุฑุฌู ุงูุถุบุท ุนูู ุงูุฑุงุจุท ุงูุชุงูู:</p>
                    <a href="${GOOGLE_SHEET_LINK}" target="_blank" style="display: block; margin: 20px auto; padding: 15px 30px; background-color: #33a16d; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; max-width: 300px;">ูุชุญ ุณุฌู ูุชุงุฆุฌ ุงูุทูุงุจ (Google Sheets)</a>
                    <p style="font-size: 0.8em; margin-top: 10px; color: #777;">*ููุงุญุธุฉ: ูุฐุง ุงูุฑุงุจุท ุณููุฌูู ูุจุงุดุฑุฉ ุฅูู ุงูุฌุฏูู ุญูุซ ูุชู ุชุฌููุน ูุชุงุฆุฌ ุงูุทูุงุจ.</p>
                `;
                adminPanelOutput.scrollIntoView({ behavior: 'smooth' });
            } else if (userPassword !== null) {
                alert("ูููุฉ ูุฑูุฑ ุงููุดุฑู ุบูุฑ ุตุญูุญุฉ. ูุง ูููู ุงููุตูู.");
                adminPanelOutput.style.display = 'none';
            }
        }

        // 6. ุชุดุบูู ุงูุฏูุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        buildQuiz(); 
        submitButton.addEventListener('click', showResults); 
    </script>
</body>
</html>